-- Customer table
CREATE TABLE customer (
    customer_id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    surname VARCHAR(255) NOT NULL,
    contact_information VARCHAR(255) NOT NULL,
    total_requests_value INT DEFAULT 0
);

-- Order table
CREATE TABLE orders (
    order_id SERIAL PRIMARY KEY,
    customer_id INT REFERENCES customer(customer_id),
    car_id INT NOT NULL,
    order_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Taxi table
CREATE TABLE taxi (
    taxi_id SERIAL PRIMARY KEY,
    brand VARCHAR(255) NOT NULL,
    model VARCHAR(255) NOT NULL,
    color VARCHAR(255) NOT NULL,
    engineType VARCHAR(20) NOT NULL,
    price_per_kil DOUBLE PRECISION NOT NULL,
    rating DOUBLE PRECISION NOT NULL,
    has_driver BOOLEAN NOT NULL,
    has_wifi BOOLEAN NOT NULL,
    has_child_seat BOOLEAN NOT NULL,
    rent_car_type VARCHAR(20) NOT NULL
);


-- Ticket table
CREATE TABLE ticket (
    ticket_id SERIAL PRIMARY KEY,
    transport_id INT NOT NULL,
    customer_id INT NOT NULL,
    price DOUBLE PRECISION NOT NULL,
    purchase_time TIMESTAMP NOT NULL,
    transport_type VARCHAR(20) NOT NULL
);

CREATE TABLE Stop (
    stop_id SERIAL PRIMARY KEY,
    trolleybus_id INT REFERENCES Trolleybus(trolleybus_id),
    bus_id INT REFERENCES Bus(bus_id),
    stop_name VARCHAR(255) NOT NULL,
    address VARCHAR(255) NOT NULL
);

CREATE TABLE Route (
    route_id SERIAL PRIMARY KEY,
    route_name VARCHAR(255) NOT NULL,
    trolleybus_id INT REFERENCES Trolleybus(trolleybus_id),
    bus_id INT REFERENCES Bus(bus_id)
);

CREATE TABLE RouteStop (
    route_id INT REFERENCES Route(route_id),
    stop_id INT REFERENCES Stop(stop_id),
    PRIMARY KEY (route_id, stop_id)
);

CREATE TABLE BusStop (
    stop_id INT REFERENCES Stop(stop_id),
    bus_id INT REFERENCES Bus(bus_id),
    PRIMARY KEY (stop_id, bus_id)
);

CREATE TABLE TrolleybusStop (
    stop_id INT REFERENCES Stop(stop_id),
    trolleybus_id INT REFERENCES Trolleybus(trolleybus_id),
    PRIMARY KEY (stop_id, trolleybus_id)
);

CREATE TABLE BusRoute (
    route_id INT REFERENCES Route(route_id),
    bus_id INT REFERENCES Bus(bus_id),
    PRIMARY KEY (route_id, bus_id)
);

CREATE TABLE TrolleybusRoute (
    route_id INT REFERENCES Route(route_id),
    trolleybus_id INT REFERENCES Trolleybus(trolleybus_id),
    PRIMARY KEY (route_id, trolleybus_id)
);

-- Bus table
CREATE TABLE bus (
    bus_id SERIAL PRIMARY KEY,
    brand VARCHAR(255) NOT NULL,
    model VARCHAR(255) NOT NULL,
    color VARCHAR(255) NOT NULL,
    engineType VARCHAR(20) NOT NULL,
    capacity INT NOT NULL,
    from_location VARCHAR(255) NOT NULL,
    to_location VARCHAR(255) NOT NULL,
    frequency VARCHAR(255) NOT NULL,
    has_contactless_payment BOOLEAN NOT NULL
);

-- Trolleybus table
CREATE TABLE trolleybus (
    trolleybus_id SERIAL PRIMARY KEY,
    brand VARCHAR(255) NOT NULL,
    model VARCHAR(255) NOT NULL,
    color VARCHAR(255) NOT NULL,
    engineType VARCHAR(20) NOT NULL,
    capacity INT NOT NULL,
    from_location VARCHAR(255) NOT NULL,
    to_location VARCHAR(255) NOT NULL,
    frequency VARCHAR(255) NOT NULL,
    has_sockets BOOLEAN NOT NULL
);

/////actual

-- Bus table
CREATE TABLE bus (
    bus_id SERIAL PRIMARY KEY,
    brand VARCHAR(255) NOT NULL,
    model VARCHAR(255) NOT NULL,
    color VARCHAR(255) NOT NULL,
    engineType VARCHAR(20) NOT NULL,
    capacity INT NOT NULL,
    from_location VARCHAR(255) NOT NULL,
    to_location VARCHAR(255) NOT NULL,
    frequency VARCHAR(255) NOT NULL,
    has_contactless_payment BOOLEAN NOT NULL
);

-- Trolleybus table
CREATE TABLE trolleybus (
    trolleybus_id SERIAL PRIMARY KEY,
    brand VARCHAR(255) NOT NULL,
    model VARCHAR(255) NOT NULL,
    color VARCHAR(255) NOT NULL,
    engineType VARCHAR(20) NOT NULL,
    capacity INT NOT NULL,
    from_location VARCHAR(255) NOT NULL,
    to_location VARCHAR(255) NOT NULL,
    frequency VARCHAR(255) NOT NULL,
    has_sockets BOOLEAN NOT NULL
);


CREATE TABLE Stop (
    stop_id SERIAL PRIMARY KEY,
    trolleybus_id INT REFERENCES Trolleybus(trolleybus_id),
    bus_id INT REFERENCES Bus(bus_id),
    stop_name VARCHAR(255) NOT NULL,
    address VARCHAR(255) NOT NULL
);

CREATE TABLE Route (
    route_id SERIAL PRIMARY KEY,
    route_name VARCHAR(255) NOT NULL,
    trolleybus_id INT REFERENCES Trolleybus(trolleybus_id),
    bus_id INT REFERENCES Bus(bus_id)
);

CREATE TABLE StopRoute (
    stop_id INT REFERENCES Stop(stop_id),
    route_id INT REFERENCES Route(route_id),
    transport_type VARCHAR(255) NOT NULL,
    transport_id INT NOT NULL,
    PRIMARY KEY (stop_id, route_id, transport_type)
);

CREATE TABLE TransportRoute (
    route_id INT REFERENCES Route(route_id),
    transport_type VARCHAR(255) NOT NULL,
    transport_id INT NOT NULL,
    PRIMARY KEY (route_id, transport_type)
);

CREATE TABLE RouteStop (
    route_id INT REFERENCES Route(route_id),
    stop_id INT REFERENCES Stop(stop_id),
    PRIMARY KEY (route_id, stop_id)
);

CREATE TABLE RoutePrice (
    route_id INT REFERENCES Route(route_id),
    price DECIMAL(10, 2) NOT NULL
);

INSERT INTO RoutePrice (route_id, price) VALUES
(1, 2.50),
(2, 3.00),
(3, 3.50);

-- Добавляем данные в таблицу bus
INSERT INTO bus (brand, model, color, engineType, capacity, from_location, to_location, frequency, has_contactless_payment)
VALUES
    ('Mercedes', 'Sprinter', 'Blue', 'DIESEL', 20, 'City A', 'City B', 'Everyday', true),
    ('Volvo', 'B7R', 'Red', 'PETROL', 25, 'City B', 'City C', 'Weekends', false),
    ('MAN', 'Lion''s City', 'Green', 'ELECTRIC', 30, 'City C', 'City D', 'Daily', true);

-- Добавляем данные в таблицу trolleybus
INSERT INTO trolleybus (brand, model, color, engineType, capacity, from_location, to_location, frequency, has_sockets)
VALUES
    ('Solaris', 'Trollino', 'Yellow', 'ELECTRIC', 40, 'City D', 'City E', 'Everyday', true),
    ('Škoda', '14Tr', 'White', 'ELECTRIC', 35, 'City E', 'City F', 'Weekends', false);

-- Добавляем данные в таблицу Stop
INSERT INTO Stop (stop_name, address)
VALUES
    ('Stop 1', 'Address 1'),
    ('Stop 2', 'Address 2'),
    ('Stop 3', 'Address 3');

-- Добавляем данные в таблицу Route
INSERT INTO Route (route_name)
VALUES
    ('Route 1'),
    ('Route 2'),
    ('Route 3');

-- Добавляем данные в таблицу StopRoute
INSERT INTO StopRoute (stop_id, route_id, transport_type, transport_id)
VALUES
    (1, 1, 'BUS', 1),
    (2, 1, 'BUS', 1),
    (3, 2, 'BUS', 2),
    (1, 3, 'TROLLEYBUS', 1),
    (2, 3, 'TROLLEYBUS', 1);

-- Добавляем данные в таблицу TransportRoute
INSERT INTO TransportRoute (route_id, transport_type, transport_id)
VALUES
    (1, 'BUS', 1),
    (2, 'BUS', 2),
    (3, 'TROLLEYBUS', 1);

