-- Customer table
CREATE TABLE customer (
    customer_id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    surname VARCHAR(255) NOT NULL,
    contact_information VARCHAR(255) NOT NULL,
    total_requests_value INT DEFAULT 0
);

-- Order table
CREATE TABLE orders (
    order_id SERIAL PRIMARY KEY,
    customer_id INT REFERENCES customer(customer_id),
    car_id INT NOT NULL,
    order_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Taxi table
CREATE TABLE taxi (
    taxi_id SERIAL PRIMARY KEY,
    brand VARCHAR(255) NOT NULL,
    model VARCHAR(255) NOT NULL,
    color VARCHAR(255) NOT NULL,
    engineType VARCHAR(20) NOT NULL,
    price_per_kil DOUBLE PRECISION NOT NULL,
    rating DOUBLE PRECISION NOT NULL,
    has_driver BOOLEAN NOT NULL,
    has_wifi BOOLEAN NOT NULL,
    has_child_seat BOOLEAN NOT NULL,
    rent_car_type VARCHAR(20) NOT NULL
);

-- Bus table
CREATE TABLE bus (
    bus_id SERIAL PRIMARY KEY,
    brand VARCHAR(255) NOT NULL,
    model VARCHAR(255) NOT NULL,
    color VARCHAR(255) NOT NULL,
    engineType VARCHAR(20) NOT NULL,
    capacity INT NOT NULL,
    from_location VARCHAR(255) NOT NULL,
    to_location VARCHAR(255) NOT NULL,
    frequency VARCHAR(255) NOT NULL,
    has_contactless_payment BOOLEAN NOT NULL
);

-- Trolleybus table
CREATE TABLE trolleybus (
    trolleybus_id SERIAL PRIMARY KEY,
    brand VARCHAR(255) NOT NULL,
    model VARCHAR(255) NOT NULL,
    color VARCHAR(255) NOT NULL,
    engineType VARCHAR(20) NOT NULL,
    capacity INT NOT NULL,
    from_location VARCHAR(255) NOT NULL,
    to_location VARCHAR(255) NOT NULL,
    frequency VARCHAR(255) NOT NULL,
    has_sockets BOOLEAN NOT NULL
);

-- Ticket table
CREATE TABLE ticket (
    ticket_id SERIAL PRIMARY KEY,
    transport_id INT NOT NULL,
    customer_id INT NOT NULL,
    price DOUBLE PRECISION NOT NULL,
    purchase_time TIMESTAMP NOT NULL,
    transport_type VARCHAR(20) NOT NULL
);

CREATE TABLE Stop (
    stop_id SERIAL PRIMARY KEY,
    trolleybus_id INT REFERENCES Trolleybus(trolleybus_id),
    bus_id INT REFERENCES Bus(bus_id),
    stop_name VARCHAR(255) NOT NULL,
    address VARCHAR(255) NOT NULL
);

CREATE TABLE Route (
    route_id SERIAL PRIMARY KEY,
    route_name VARCHAR(255) NOT NULL,
    trolleybus_id INT REFERENCES Trolleybus(trolleybus_id),
    bus_id INT REFERENCES Bus(bus_id)
);

CREATE TABLE RouteStop (
    route_id INT REFERENCES Route(route_id),
    stop_id INT REFERENCES Stop(stop_id),
    PRIMARY KEY (route_id, stop_id)
);

CREATE TABLE BusStop (
    stop_id INT REFERENCES Stop(stop_id),
    bus_id INT REFERENCES Bus(bus_id),
    PRIMARY KEY (stop_id, bus_id)
);

CREATE TABLE TrolleybusStop (
    stop_id INT REFERENCES Stop(stop_id),
    trolleybus_id INT REFERENCES Trolleybus(trolleybus_id),
    PRIMARY KEY (stop_id, trolleybus_id)
);

CREATE TABLE BusRoute (
    route_id INT REFERENCES Route(route_id),
    bus_id INT REFERENCES Bus(bus_id),
    PRIMARY KEY (route_id, bus_id)
);

CREATE TABLE TrolleybusRoute (
    route_id INT REFERENCES Route(route_id),
    trolleybus_id INT REFERENCES Trolleybus(trolleybus_id),
    PRIMARY KEY (route_id, trolleybus_id)
);

